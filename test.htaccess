# Security restrictions for test.php
# Rename this file to .htaccess in production to restrict access

# Block all direct access to test.php by default
<Files "test.php">
    # For Apache 2.4 and later
    <IfModule mod_authz_core.c>
        # Allow access only from localhost
        Require local
        # Uncomment the line below to prevent all access in production
        # Require all denied
    </IfModule>
    
    # For Apache 2.2 and earlier
    <IfModule !mod_authz_core.c>
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1 ::1 localhost
        # Uncomment the line below to prevent all access in production
        # Allow from none
    </IfModule>
</Files>

# Prevent viewing of .htaccess file
<Files ".htaccess">
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
    <IfModule !mod_authz_core.c>
        Order Allow,Deny
        Deny from all
    </IfModule>
</Files>

# Add environment check - if ENVIRONMENT constant is set to 'production', block all access
# Note: This requires the SetEnvIf module to be enabled
<IfModule mod_setenvif.c>
    SetEnvIfExpr "getenv('ENVIRONMENT') == 'production'" PRODUCTION
    
    <Files "test.php">
        <IfModule mod_authz_core.c>
            <RequireAll>
                Require local
                Require not env PRODUCTION
            </RequireAll>
        </IfModule>
    </Files>
</IfModule>

